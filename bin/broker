#!/bin/sh

S_ADDRESS="-Dibis.server.address=fs0.das3.cs.vu.nl-7777"
POOL_NAME="-Dibis.pool.name=ibisDist"
PROG_NAME=ibis.mbf.broker.Broker

for i in external/ibis/*.jar
do
    CP=$CP:$i
done

for i in jars/*.jar
do
    CP=$CP:$i
done

NORMAL=
SPECIAL=

while [ $# -gt 0 ]
do

        HEADER=`echo $1 | head --bytes=2`

        case "$HEADER" in
        -D)
                SPECIAL="$SPECIAL $1"
                ;;
        *)
                NORMAL="$NORMAL $1"
                ;;
        esac
        shift
done

#java -XX:+PrintCompilation -XX:+CITime -cp $CP $SPECIAL ibis.mbf.broker.Broker $NORMAL
java -cp $CP $SPECIAL $S_ADDRESS $POOL_NAME $PROG_NAME $NORMAL



